<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jungle Chess Extended</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body> <!-- Body now has background image via CSS -->
    <h1>Jungle Chess (Cờ thú)</h1>

    <div id="game-controls">
        <label for="game-mode">Mode:</label>
        <select id="game-mode">
            <option value="PVA" selected>Player vs AI</option>
            <option value="PVP">Player vs Player</option>
        </select>
        
        <div id="ai-controls"> <!-- Group AI settings -->
            <div id="ai-difficulty-control">
                <label for="difficulty">AI Target Depth:</label> <!-- Changed label -->
                <select id="difficulty">
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option> <!-- Default max depth -->
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9" selected>9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                </select>
            </div>

            <!-- *** ADDED: Time Limit Control *** -->
            <div id="ai-time-limit-control">
                <label for="time-limit">AI Time Limit (ms):</label>
                <input type="number" id="time-limit" value="5000" min="100" step="100"> <!-- Default 5s -->
            </div>

            <span class="ai-info">Actual AI Depth: <span id="ai-depth-achieved">0</span></span>
        </div>


        <button id="reset-button">Reset Game</button>
    </div>

    <!-- Game Layout now has its own semi-transparent background -->
    <div id="game-layout">
        <!-- Left Panel (Only Captured Pieces) -->
        <div id="left-panel">
            <div id="captured-pieces-player1" class="captured-panel">
                <h2>Captured by Red:</h2>
                <div class="pieces-container"></div>
            </div>
        </div>

        <!-- Main Game Area (Board + Status) -->
        <div id="main-game-area">
            <div id="board-container">
                <div id="col-labels-top" class="coord-labels col-labels"></div>
                <div id="row-labels-left" class="coord-labels row-labels"></div>
                <div id="game-board">
                    <!-- Board squares generated by JS -->
                </div>
                <div id="row-labels-right" class="coord-labels row-labels"></div>
                <div id="col-labels-bottom" class="coord-labels col-labels"></div>
            </div>
            <p id="status">Select a piece to move.</p>
        </div>

        <!-- Right Panel (Captured + History + Turn) -->
        <div id="right-panel">
             <div id="captured-pieces-player0" class="captured-panel">
                <h2>Captured by Blue:</h2>
                <div class="pieces-container"></div>
            </div>
            <div id="move-history">
                <h2>Move History</h2>
                <ol id="move-list"></ol>
            </div>
            <p class="turn-info">Turn: <span id="turn">Player</span></p>
        </div>
    </div> <!-- End of game-layout -->

    <!-- Rules Section Moved Below Game Layout -->
    <div id="game-rules">
        <h2>Game Rules Summary</h2>
            <ul>
                <li>Pieces move 1 square orthogonally.</li>
                <li>Rank: 🐘 > 🦁 > 🐅 > 🐆 > 🐺 > 🐕 > 🐈 > 🐀</li>
                <li>Higher rank captures lower. Equal ranks capture.</li>
                <li>Exception: 🐀 captures 🐘 (if Rat is on land).</li>
                <li>Exception: 🐘 cannot capture 🐀.</li>
                <li><b>Traps (Pink):</b> Any piece entering an opponent's trap has its rank reduced to 0 (captured by anything). Own trap has no effect.</li>
                <li><b>Water (Blue):</b> Only 🐀 can enter. Cannot capture from water onto land (except Rat vs Rat). 🐀 in water block jumps.</li>
                <li><b>River Jump:</b> 🦁 and 🐅 can jump vertically over river if no 🐀 blocks. 🦁 can also jump horizontally. Jump captures piece of equal/lower rank on landing square.</li>
                <li><b>Dens (Marked):</b> Win by entering opponent's Den. Cannot enter own Den. Traps near own Den are "friendly", traps near opponent Den are "opponent's".</li>
                <li>Win: Enter opponent Den or capture all opponent pieces.</li>
            </ul>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>